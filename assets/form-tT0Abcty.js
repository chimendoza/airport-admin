import{W as w}from"./vuejs3-datepicker-1NLZxlC6.js";import{_ as k,o as u,c as m,a as e,f as C,g as n,b as o,F as A,k as S,t as D,l as I,i as R,r as _,m as U,d as f,w as q,p as B,h as F}from"./index-Drk3BKBC.js";const N={name:"SeatClassForm",components:{DatePicker:w},data(){return{searching:!1,aircrafts:[],newrows:[],aircraft:{},rates:[],flight_rates:[],array_aircrafts:[],initial_rates:[]}},props:{airlines:{type:Array,default:[]},destinations:{type:Array,default:[]},modelValue:{type:Object,default:{}},errors:{type:Object,default:{}}},computed:{get_flight_rate(){return function(l){if(this.modelValue.flightRates){let a=this.modelValue.flightRates.find(t=>t.seatclass_id==l);if(a)return a.price}return""}}},methods:{add_flight_rate(l,a){let t=a.target.value;this.modelValue.flight_rates||(this.modelValue.flight_rates=[]);let r=this.modelValue.flight_rates.findIndex(d=>d.seatclass_id==l);r!=-1?this.modelValue.flight_rates[r].price=t:this.modelValue.flight_rates.push({seatclass_id:l,price:t})},fillRates(){let l=this.modelValue.aircraft_id,a=this.array_aircrafts.find(t=>t.id==l);a&&(this.rates=a.seatClasses)},loadAircrafts(){let l=this.modelValue.airline_id;this.$push.promise("Cargando aeronaves"),this.$api.get("/aircrafts?filter[airline_id]="+l+"&expand=seatClasses").then(a=>{this.makeAircrafts(a)}).catch(a=>{}).finally(()=>{this.$push.clearAll()})},makeAircrafts(l){let a=[],t;for(var r in l.data)t=l.data[r],a.push({id:t.id,name:t.code+" "+t.model});this.aircrafts=a,this.array_aircrafts=l.data}},watch:{"modelValue.airline_id":{handler:function(){this.loadAircrafts()},deep:!0},"modelValue.aircraft_id":{handler:function(){this.fillRates()},deep:!0},array_aircrafts:{handler:function(){this.fillRates()},deep:!0},"modelValue.flightRates":{handler:function(l){this.modelValue.flight_rates=l},deep:!0}}},i=l=>(B("data-v-e3745455"),l=l(),F(),l),M={class:"card"},P={class:"card-body"},j=i(()=>e("p",{class:"card-description"}," Datos del vuelo",-1)),H={class:"row"},O={class:"col-md-4"},T={class:"form-group"},W=i(()=>e("label",{class:"col-form-label"},"Destino",-1)),x={class:"col-md-4"},E={class:"form-group"},L=i(()=>e("label",{class:"col-form-label"},"Aerolínea",-1)),z={class:"col-md-4"},G={class:"form-group"},J=i(()=>e("label",{class:"col-form-label"},"Aeronave",-1)),K={class:"row"},Q={class:"col-md-6"},X={class:"form-group row"},Y=i(()=>e("label",{class:"col-sm-3 col-form-label"},"Hora de salida",-1)),Z={class:"col-sm-9 col-relative"},$={class:"col-md-6"},ee={class:"form-group row"},te=i(()=>e("label",{class:"col-sm-3 col-form-label"},"Hora de llegada",-1)),ae={class:"col-sm-9 col-relative"},le={key:0,class:"set-rates"},se=i(()=>e("p",{class:"card-title"},"Tarifas",-1)),oe={class:"rates row"},ie={class:"col-md-4"},re={class:"form-group"},de=["value","onInput"],ne={class:"form-group"},ce={class:"form-actions"};function ue(l,a,t,r,d,h){const c=_("FormControl"),V=_("VueDatePicker"),v=_("router-link"),p=_("SubmitButton"),g=U("type");return u(),m("div",M,[e("div",P,[e("form",{class:"form-sample",onSubmit:a[6]||(a[6]=C((...s)=>l.saveModel&&l.saveModel(...s),["prevent"]))},[n(l.$slots,"title",{},()=>[j],!0),e("div",H,[e("div",O,[e("div",T,[W,o(c,{type:"select",modelValue:t.modelValue.destination_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t.modelValue.destination_id=s),error:t.errors.destination_id,required:!0,options:t.destinations},null,8,["modelValue","error","options"])])]),e("div",x,[e("div",E,[L,o(c,{type:"select",modelValue:t.modelValue.airline_id,"onUpdate:modelValue":a[1]||(a[1]=s=>t.modelValue.airline_id=s),error:t.errors.airline_id,required:!0,options:t.airlines},null,8,["modelValue","error","options"])])]),e("div",z,[e("div",G,[J,o(c,{type:"select",modelValue:t.modelValue.aircraft_id,"onUpdate:modelValue":a[2]||(a[2]=s=>t.modelValue.aircraft_id=s),error:t.errors.aircraft_id,required:!0,options:d.aircrafts},null,8,["modelValue","error","options"])])])]),e("div",K,[e("div",Q,[e("div",X,[Y,e("div",Z,[o(V,{modelValue:t.modelValue.departure_time,"onUpdate:modelValue":a[3]||(a[3]=s=>t.modelValue.departure_time=s),required:!0},null,8,["modelValue"])])])]),e("div",$,[e("div",ee,[te,e("div",ae,[o(V,{modelValue:t.modelValue.arrival_time,"onUpdate:modelValue":a[4]||(a[4]=s=>t.modelValue.arrival_time=s),language:"es",required:!0},null,8,["modelValue"])])])])]),d.rates?(u(),m("div",le,[se,e("div",oe,[e("div",ie,[(u(!0),m(A,null,S(d.rates,(s,b)=>(u(),m("div",{key:b},[e("div",re,[e("label",null,D(s.name),1),I(e("input",{class:"form-control",value:h.get_flight_rate(s.id),onInput:y=>h.add_flight_rate(s.id,y)},null,40,de),[[g,"number"]])])]))),128))])])])):R("",!0),n(l.$slots,"active",{},()=>[e("div",ne,[e("label",null,[f("Activo "),o(c,{type:"switch",modelValue:t.modelValue.active,"onUpdate:modelValue":a[5]||(a[5]=s=>t.modelValue.active=s)},null,8,["modelValue"])])])],!0),n(l.$slots,"options",{},()=>[e("div",ce,[n(l.$slots,"cancel",{},()=>[o(v,{to:l.autolink(),class:"btn btn-danger btn-icon-text"},{default:q(()=>[f("Cancelar")]),_:1},8,["to"])],!0),f("   "),n(l.$slots,"submit",{},()=>[o(p)],!0)])],!0)],32)])])}const fe=k(N,[["render",ue],["__scopeId","data-v-e3745455"]]);export{fe as f};
